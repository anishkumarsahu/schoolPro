{% extends 'index.html' %}
{% load static %}

{% block css %}
    <style>
        .avatar-upload {
            position: relative;
            max-width: 205px;
            margin: 10px auto;

        }

        .avatar-upload .avatar-edit {
            position: absolute;
            right: 75px;
            z-index: 1;
            top: 10px;

        }

        .avatar-upload .avatar-edit input {
            display: none;
        }

        .avatar-upload .avatar-edit input + label {
            display: inline-block;
            width: 0px;
            height: 0px;
            margin-bottom: 0;
            border-radius: 100%;
            background: #FFFFFF;
            border: 1px solid transparent;
            box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.12);
            cursor: pointer;
            font-weight: normal;
            transition: all 0.2s ease-in-out;
            padding: 20px;
        }

        .avatar-upload .avatar-edit input + label:hover {
            background: #f1f1f1;
            border-color: #d6d6d6;
            padding: 20px;
        }

        .avatar-upload .avatar-edit input + label:after {
            content: "\f040";
            font-family: 'FontAwesome';
            color: #757575;
            position: absolute;
            top: 10px;
            left: 0;
            right: 0;
            text-align: center;
            margin: auto;

        }

        .avatar-upload .avatar-preview {
            width: 100px;
            height: 100px;
            position: relative;
            border-radius: 100%;
            border: 6px solid #F8F8F8;
            box-shadow: 0px 2px 10px 2px rgba(0, 0, 0, 0.5);
        }

        .avatar-upload .avatar-preview > div {
            width: 100%;
            height: 100%;
            border-radius: 100%;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
        }


    </style>

{% endblock %}

{% block  main %}
    <div class="right_col" role="main">
        <div class="">
            <div class="page-title">
                <div class="title_left">
                    <h3>Student List</h3>
                </div>


            </div>

            <div class="clearfix"></div>


            <div class="row">

                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h2>{{ request.session.CurrentSchoolSession.currentSessionYear }}</h2>

                            <div class="clearfix"></div>
                        </div>
                        <div class="x_content">
                            <p class="text-muted font-13 m-b-30">

                            <div class="row">
                                <div class="col-md-6 col-sm-12">
                                    <select id="stuClassget" class="form-control" onchange="getClassSectionListget()">

                                        <option value="">Choose Class</option>
                                    </select>
                                </div>

                                <div class="col-md-5 col-sm-12">

                                    <select id="stuSec" class="form-control" onchange="stuChange()">


                                    </select>

                                </div>
                                <div class="col-md-1 col-sm-6 col-xs-12">

                                    <button type="button"
                                            class="btn btn-success" onclick="GetStudentList()">
                                        <i class="fa fa-search"></i> Search
                                    </button>
                                </div>

                            </div>


                            </p>
                            <table id="studentList" class="table table-striped table-bordered bulk_action"
                                   style="width: 100%">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Photo</th>
                                    <th>Name</th>
                                    <th>Class</th>
                                    <th>Section</th>
                                    <th>Roll_No.</th>
                                    <th>Gender</th>
                                    <th>Father_Name</th>
                                    <th>Phone</th>
                                    <th>UniqueKey</th>
                                    <th>Action</th>
                                </tr>
                                </thead>


                                <tbody>

                                </tbody>
                            </table>


                        </div>
                    </div>
                </div>


                <div class="modal fade bd-example-modal-lg" id="myModal" role="dialog">
                    <div class="modal-dialog modal-lg">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Student Detail</h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-md-12 col-sm-12 col-xs-12">
                                        <div class="col-md-3 col-sm-3 col-xs-12 profile_left">
                                            <div class="profile_img">
                                                <div id="crop-avatar">
                                                    <!-- Current avatar -->
                                                    <img class="img-responsive avatar-view" id="sPhoto"
                                                         src="{% static 'images/picture.jpg' %}"
                                                         alt="Avatar" title="Change the avatar">
                                                </div>
                                                <h4 id="sName"></h4>
                                            </div>
                                            <ul class="list-unstyled user_data">
                                                <li>
                                                    <i class="fa fa-graduation-cap user-profile-icon"></i>
                                                    <span id="sStandard"></span> - <span id="sSection"></span>
                                                </li>
                                                <li>
                                                    <i class="fa fa-list-ol user-profile-icon"></i>
                                                    Roll Number - <span id="sRoll"></span>
                                                </li>
                                                <li>
                                                    <i class="fa fa-user user-profile-icon"></i>
                                                    Gender - <span id="sGender"></span>
                                                </li>
                                                <li>
                                                    <i class="fa fa-envelope user-profile-icon"></i>
                                                    Email - <span id="sEmail"></span>
                                                </li>
                                                <li>
                                                    <i class="fa fa-mobile-phone user-profile-icon"></i>
                                                    Mobile No. - <span id="sPhoneNumber"></span>
                                                </li>
                                                <li>
                                                    <i class="fa fa-calendar user-profile-icon"></i>
                                                    Date Of Birth - <span id="sDOB"></span>
                                                </li>
                                                <li>
                                                    <i class="fa fa-tint user-profile-icon"></i>
                                                    Blood Group - <span id="sBloodGroup"></span>
                                                </li>
                                                <li>
                                                    <i class="fa fa-calendar user-profile-icon"></i>
                                                    Date Of Joining - <span id="sDateOfJoining"></span>
                                                </li>
                                            </ul>
                                            {#                                                <a class="btn btn-success"><i class="fa fa-print m-right-xs"></i>Print#}
                                            {#                                                    Profile</a>#}
                                            {#                                                <br/>#}

                                        </div>
                                        <div class="col-md-9 col-sm-9 col-xs-12">
                                            <div class="profile_title">
                                                <div class="col-md-6">
                                                    <h2 id="ssName"></h2>
                                                </div>
                                            </div>
                                            <div class="x_content">
                                                <table class="table table-striped">
                                                    <tbody>
                                                    <tr>
                                                        <th scope="row">FATHER'S NAME:</th>
                                                        <td id="sFatherName"></td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">FATHER'S OCCUPATION:</th>
                                                        <td id="sOccupation"></td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">EMAIL ID:</th>
                                                        <td id="sFatherEmail"></td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">MOBILE NO:</th>
                                                        <td id="sFatherPhone"></td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">MOTHER'S NAME:</th>
                                                        <td id="sMotherName"></td>
                                                    </tr>

                                                    <tr>
                                                        <th scope="row">PRESENT ADDRESS:</th>
                                                        <td id="sPresentAddress"></td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">PERMANENT ADDRESS:</th>
                                                        <td id="sPermanentAddress"></td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">IS ACTIVE:</th>
                                                        <td id="sIsActive"></td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">USERNAME:</th>
                                                        <td id="sUserName"></td>
                                                    </tr>
                                                    <tr>
                                                        <th scope="row">PASSWORD:</th>
                                                        <td id="sPassword"></td>
                                                    </tr>
                                                    </tbody>
                                                </table>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger" data-dismiss="modal"><i
                                            class="fa fa-times m-right-xs"></i>Close
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>


                <div class="modal fade bd-example-modal-lg" id="myModalStudentEdit" role="dialog">
                    <div class="modal-dialog modal-lg">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h4 class="modal-title">Edit Student Detail</h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <form id="studentAddNewForm"> {% csrf_token %}
                                        <input type="hidden" id="EditStudentID">
                                        <div class="col-md-12 col-sm-12 col-xs-12 form-group has-feedback">
                                            <label>Photo *:</label>

                                            <div class="avatar-upload">
                                                <div class="avatar-edit">
                                                    <input type='file' id="Timage"
                                                           accept="image/*"/>
                                                    <label style="padding: 20px;font-size: 20px"
                                                           for="Timage"></label>
                                                </div>
                                                <div class="avatar-preview">
                                                    <div id="imagePreviewAddUser"
                                                         style="background-image: url(uploaduser.png);">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                            <div class="x_panel">
                                                <div class="x_title">
                                                    <h2>Personal Details
                                                        <small>(Student)</small>
                                                    </h2>

                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="x_content">
                                                    <br/>


                                                    <div class="col-md-4 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>First Name *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuFirstName"
                                                               placeholder="First Name">
                                                        <span class="fa fa-user form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>

                                                    <div class="col-md-4 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Middle Name:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuMiddleName"
                                                               placeholder="Middle Name">
                                                        <span class="fa fa-user form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-4 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Last Name *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuLastName"
                                                               placeholder="Last Name">
                                                        <span class="fa fa-user form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Email (Optional):</label>
                                                        <input type="email" class="form-control has-feedback-left"
                                                               id="stuEmail"
                                                               placeholder="Email Address(Optional)">
                                                        <span class="fa fa-envelope form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Phone Number (Optional):</label>
                                                        <input type="number" class="form-control has-feedback-left"
                                                               id="stuPhone"
                                                               placeholder="Phone Number(Optional)">
                                                        <span class="fa fa-phone form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Blood Group (Optional):</label>
                                                        <select id="stuBloodGroup" class="form-control">
                                                            <option value="">Choose..</option>
                                                            <option value="A+">A+</option>
                                                            <option value="A-">A-</option>
                                                            <option value="B+">B+</option>
                                                            <option value="B-">B-</option>
                                                            <option value="AB+">AB+</option>
                                                            <option value="AB-">AB-</option>
                                                            <option value="O+">O+</option>
                                                            <option value="O-">O-</option>
                                                        </select>
                                                    </div>


                                                    <div class='col-sm-6'>
                                                        <label>DOB *:</label>
                                                        <div class="form-group">
                                                            <div class='input-group date' id='myDatepicker2'>
                                                                <input type='text' class="form-control" id="stuDOB"/>
                                                                <span class="input-group-addon">
                               <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Aadhar Number(Optional):</label>
                                                        <input type="number" class="form-control has-feedback-left"
                                                               id="stuAdhaar"
                                                               placeholder="Aadhar Number(Optional)">
                                                        <span class="fa fa-list-ol form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>
                                                    <div class="col-md-6 col-sm-6 col-xs-12">
                                                        <label>Gender *:</label>
                                                        <p>
                                                            Male:
                                                            <input type="radio" class="flatD" name="gender" value="Male"
                                                                   required/>
                                                            Female:
                                                            <input type="radio" class="flatD" name="gender"
                                                                   value="Female"/>

                                                            Others:
                                                            <input type="radio" class="flatD" name="gender"
                                                                   value="Others"/>
                                                        </p>

                                                    </div>


                                                </div>
                                            </div>
                                        </div>


                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                            <div class="x_panel" style="min-height: 383px">
                                                <div class="x_title">
                                                    <h2>Parent Details</h2>

                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="x_content">
                                                    <br/>

                                                    <div class="col-md-4 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Father First Name *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuFatherFirstName"
                                                               placeholder="First Name">
                                                        <span class="fa fa-user form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>

                                                    <div class="col-md-4 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Father Middle Name:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuFatherMiddleName"
                                                               placeholder="Middle Name">
                                                        <span class="fa fa-user form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-4 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Father Last Name *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuFatherLastName"
                                                               placeholder="Last Name">
                                                        <span class="fa fa-user form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-4 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Mother First Name *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuMotherFirstName"
                                                               placeholder="First Name">
                                                        <span class="fa fa-user form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>

                                                    <div class="col-md-4 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Mother Middle Name:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuMotherMiddleName"
                                                               placeholder="Middle Name">
                                                        <span class="fa fa-user form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-4 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Mother Last Name *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuMotherLastName"
                                                               placeholder="Last Name">
                                                        <span class="fa fa-user form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Email (Optional):</label>
                                                        <input type="email" class="form-control has-feedback-left"
                                                               id="stuFatherEmail"
                                                               placeholder="Email Address(Optional)">
                                                        <span class="fa fa-envelope form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Phone Number *:</label>
                                                        <input type="number" class="form-control has-feedback-left"
                                                               id="stuFatherPhone"
                                                               placeholder="Phone Number">
                                                        <span class="fa fa-phone form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Profession *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuFatherProfession"
                                                               placeholder="Profession">
                                                        <span class="fa fa-briefcase form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>


                                        <div class="col-md-6 col-sm-12 col-xs-12">
                                            <div class="x_panel">
                                                <div class="x_title">
                                                    <h2>Present Address</h2>

                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="x_content">
                                                    <br/>

                                                    <div class="col-md-12 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Address *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuAddress" placeholder="Address">
                                                        <span class="fa fa-globe form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>
                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Country *:</label>
                                                        <select id="stuCountry" class="form-control">
                                                            <option value="India">India</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>State *:</label>
                                                        <select id="stuState" class="form-control">
                                                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                                                            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                                            <option value="Assam">Assam</option>
                                                            <option value="Bihar">Bihar</option>
                                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                                            <option value="Goa">Goa</option>
                                                            <option value="Gujarat">Gujarat</option>
                                                            <option value="Haryana">Haryana</option>
                                                            <option value="Himachal Pradesh">Himachal Pradesh</option>
                                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                            <option value="Jharkhand">Jharkhand</option>
                                                            <option value="Karnataka">Karnataka</option>
                                                            <option value="Kerala">Kerala</option>
                                                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                                                            <option value="Maharashtra">Maharashtra</option>
                                                            <option selected value="Manipur">Manipur</option>
                                                            <option value="Meghalaya">Meghalaya</option>
                                                            <option value="Mizoram">Mizoram</option>
                                                            <option value="Nagaland">Nagaland</option>
                                                            <option value="Orissa">Orissa</option>
                                                            <option value="Punjab">Punjab</option>
                                                            <option value="Rajasthan">Rajasthan</option>
                                                            <option value="Sikkim">Sikkim</option>
                                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                                            <option value="Telangana">Telangana</option>
                                                            <option value="Tripura">Tripura</option>
                                                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                                                            <option value="Uttarakhand">Uttarakhand</option>
                                                            <option value="West Bengal">West Bengal</option>

                                                        </select>
                                                    </div>

                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>City Name *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuCity"
                                                               placeholder="City Name">
                                                        <span class="fa fa-globe form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Pin Code *:</label>
                                                        <input type="number" class="form-control has-feedback-left"
                                                               id="stuPincode"
                                                               placeholder="Pin Code">
                                                        <span class="fa fa-list-ol form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>


                                        <div class="col-md-6 col-sm-12 col-xs-12">
                                            <div class="x_panel">
                                                <div class="x_title">
                                                    <h2>Permanent Address</h2>

                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="x_content">
                                                    <br/>

                                                    <div class="col-md-12 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Address *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuPAddress" placeholder="Address">
                                                        <span class="fa fa-globe form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>
                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Country *:</label>
                                                        <select id="stuPCountry" class="form-control">
                                                            <option value="India">India</option>

                                                        </select>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>State *:</label>
                                                        <select id="stuPState" class="form-control">
                                                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                                                            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                                            <option value="Assam">Assam</option>
                                                            <option value="Bihar">Bihar</option>
                                                            <option value="Chhattisgarh">Chhattisgarh</option>
                                                            <option value="Goa">Goa</option>
                                                            <option value="Gujarat">Gujarat</option>
                                                            <option value="Haryana">Haryana</option>
                                                            <option value="Himachal Pradesh">Himachal Pradesh</option>
                                                            <option value="Jammu and Kashmir">Jammu and Kashmir</option>
                                                            <option value="Jharkhand">Jharkhand</option>
                                                            <option value="Karnataka">Karnataka</option>
                                                            <option value="Kerala">Kerala</option>
                                                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                                                            <option value="Maharashtra">Maharashtra</option>
                                                            <option selected value="Manipur">Manipur</option>
                                                            <option value="Meghalaya">Meghalaya</option>
                                                            <option value="Mizoram">Mizoram</option>
                                                            <option value="Nagaland">Nagaland</option>
                                                            <option value="Orissa">Orissa</option>
                                                            <option value="Punjab">Punjab</option>
                                                            <option value="Rajasthan">Rajasthan</option>
                                                            <option value="Sikkim">Sikkim</option>
                                                            <option value="Tamil Nadu">Tamil Nadu</option>
                                                            <option value="Telangana">Telangana</option>
                                                            <option value="Tripura">Tripura</option>
                                                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                                                            <option value="Uttarakhand">Uttarakhand</option>
                                                            <option value="West Bengal">West Bengal</option>

                                                        </select>
                                                    </div>

                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>City Name *:</label>
                                                        <input type="text" class="form-control has-feedback-left"
                                                               id="stuPCity"
                                                               placeholder="City Name">
                                                        <span class="fa fa-globe form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Pin Code *:</label>
                                                        <input type="number" class="form-control has-feedback-left"
                                                               id="stuPPincode"
                                                               placeholder="Pin Code">
                                                        <span class="fa fa-list-ol form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>


                                        <div class="col-md-12 col-sm-12 col-xs-12">
                                            <div class="x_panel">
                                                <div class="x_title">
                                                    <h2>School Details</h2>

                                                    <div class="clearfix"></div>
                                                </div>
                                                <div class="x_content">
                                                    <br/>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Class *:</label>
                                                        <select id="stuClass" class="form-control"
                                                                onchange="getClassSectionList()">
                                                            <option value="">Choose..</option>

                                                        </select>
                                                    </div>


                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Section:</label>
                                                        <select id="stuSection" class="form-control">
                                                            <option value="">Choose..</option>
                                                        </select>
                                                    </div>

                                                    <div class="col-md-6 col-sm-6 col-xs-12 form-group has-feedback">
                                                        <label>Roll Number:</label>
                                                        <input type="number" class="form-control has-feedback-left"
                                                               id="stuRoll"
                                                               placeholder="Roll Name">
                                                        <span class="fa fa-list-ol form-control-feedback left"
                                                              aria-hidden="true"></span>
                                                    </div>


                                                    <div class='col-sm-6'>
                                                        <label>Date Of Joining *:</label>
                                                        <div class="form-group">
                                                            <div class='input-group date' id='myDatepicker21'>
                                                                <input type='text' class="form-control" id="stuDOJ"/>
                                                                <span class="input-group-addon">
                               <span class="glyphicon glyphicon-calendar"></span>
                            </span>
                                                            </div>
                                                        </div>
                                                    </div>


                                                </div>
                                            </div>
                                        </div>


                                    </form>

                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-success" onclick="postEditStudentDetail()"><i
                                            class="fa fa-check m-right-xs"></i>Update
                                    </button>
                                    <button type="button" class="btn btn-danger" data-dismiss="modal"><i
                                            class="fa fa-times m-right-xs"></i>Close
                                    </button>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>


                <div class="modal fade" id="myModalDelete" role="dialog">
                    <div class="modal-dialog ">

                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                                <h2 class="modal-title">Confirmation</h2>
                            </div>
                            <div class="modal-body">
                                <p style="color: #0D3349;font-size: 20px">Are you sure you want to delete this
                                    data.</p>
                                <input type="hidden" id="deleteID">
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" onclick="DeleteStudent()">Delete</button>
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close
                                </button>
                            </div>
                        </div>

                    </div>
                </div>


            </div>
        </div>
    </div>
{% endblock %}


{% block js %}
    <script>

        function Studentdate() {
            $('#myDatepicker2').datetimepicker({

                format: 'YYYY-MM-DD'
            });
            $('#myDatepicker21').datetimepicker({
                format: 'YYYY-MM-DD'
            });
        }


        $(
            Studentdate(),
            getOnlyClassListListget()
        );
        function getOnlyClassListListget() {
            $.ajax({
                type: 'get',
                url: '/api/GetOnlyClassList/',
                success: function (response) {

                    for (i in response.data) {
                        listData = '<option value="' + response.data[i].ClassID + '">' + response.data[i].Standard + '</option>';
                        $('#stuClassget').append(listData);
                    }
                    {#            return response;#}
                },
                error: function () {
                    $('#name_status').addClass('validate_data');
                    $('#name_status').html('error.');
                }
            });

        }
        function getClassSectionListget() {
            stuChange();

            var id = $('#stuClassget').val();
            $('#stuSec').html('');
            if (id !== '') {


                $.ajax({
                    type: 'get',
                    url: '/api/GetOnlyClassSectionDetail/' + id + '/',
                    success: function (response) {


                        for (i in response.data) {
                            listData = '<option value="' + response.data[i].SectionID + '">' + response.data[i].Section + '</option>';
                            $('#stuSec').append(listData);


                        }
                        return response;
                    },
                    error: function () {
                        $('#name_status').addClass('validate_data');
                        $('#name_status').html('error.').fadeIn().fadeOut(2000);
                    }
                });
            }


        }


        function getStudentDetail(id) {
            $.ajax({
                type: 'get',
                url: '/api/GetStudentDetail/' + id + '/',
                success: function (response) {
                    $('#sStudentID').html(response.data['StudentID']);
                    $('#sName').html(response.data['Name']);
                    $('#ssName').html(response.data['Name']);
                    $('#sDOB').html(response.data['DOB']);
                    $('#sAadhar').html(response.data['Aadhar']);
                    $('#sGender').html(response.data['Gender']);
                    $('#sBloodGroup').html(response.data['BloodGroup']);
                    $('#sPhoneNumber').html(response.data['PhoneNumber']);
                    $('#sEmail').html(response.data['Email']);
                    $('#sPresentAddress').html(response.data['PresentAddress']);
                    $('#sPermanentAddress').html(response.data['PermanentAddress']);
                    $('#sStandard').html(response.data['Standard']);
                    $('#sSection').html(response.data['Section']);
                    $('#sRoll').html(response.data['Roll']);
                    $('#sDateOfJoining').html(response.data['DateOfJoining']);
                    $('#sFatherName').html(response.data['FatherName']);
                    $('#sMotherName').html(response.data['MotherName']);
                    $('#sOccupation').html(response.data['Occupation']);
                    $('#sFatherPhone').html(response.data['FatherPhone']);
                    $('#sFatherEmail').html(response.data['FatherEmail']);
                    $('#sIsActive').html(response.data['IsActive']);
                    $('#sUserName').html(response.data['UserName']);
                    $('#sPassword').html(response.data['Password']);
                    $('#sPhoto').attr('src', response.data['Photo']);
                    return response;
                }
            });

        }
        function editStudentDetail(id) {
            getOnlyClassListList();


            $.ajax({
                type: 'get',
                url: '/api/GetStudentDetailForEdit/' + id + '/',
                success: function (response) {
                    $('#EditStudentID').val(response.data['StudentID']);
                    $('#stuFirstName').val(response.data['FirstName']);
                    $('#stuMiddleName').val(response.data['MiddleName']);
                    $('#stuLastName').val(response.data['LastName']);
                    $('#stuEmail').val(response.data['Email']);
                    $('#stuPhone').val(response.data['PhoneNumber']);
                    $('#stuBloodGroup').val(response.data['BloodGroup']);
                    $('#stuDOB').val(response.data['DOB']);
                    $('#stuAdhaar').val(response.data['Aadhar']);
                    $('input[name = gender]').val([response.data['Gender']]);

                    $('#stuFatherFirstName').val(response.data['FatherFirstName']);
                    $('#stuFatherMiddleName').val(response.data['FatherMiddleName']);
                    $('#stuFatherLastName').val(response.data['FatherLastName']);
                    $('#stuMotherFirstName').val(response.data['MotherFirstName']);
                    $('#stuMotherMiddleName').val(response.data['MotherMiddleName']);
                    $('#stuMotherLastName').val(response.data['MotherLastName']);
                    $('#stuFatherEmail').val(response.data['FatherEmail']);
                    $('#stuFatherPhone').val(response.data['FatherPhone']);
                    $('#stuFatherProfession').val(response.data['Occupation']);

                    $('#stuAddress').val(response.data['PresentAddress']);
                    $('#stuCity').val(response.data['PresentCity']);
                    $('#stuState').val(response.data['PresentState']);
                    $('#stuCountry').val(response.data['PresentCountry']);
                    $('#stuPincode').val(response.data['PresentPin']);
                    $('#stuPAddress').val(response.data['PermanentAddress']);
                    $('#stuPCity').val(response.data['PermanentCity']);
                    $('#stuPState').val(response.data['PermanentState']);
                    $('#stuPCountry').val(response.data['PermanentCounty']);
                    $('#stuPPincode').val(response.data['PermanentPin']);
                    $('#stuClass').val(response.data['StandardID']);
                    getClassSectionList(response.data['StandardID']);
                    $('#stuSection').val(response.data['Section']);
                    $('#stuRoll').val(response.data['Roll']);
                    $('#stuDOJ').val(response.data['DateOfJoining']);
                    {#                    $('#stuDOJ').val(response.data['IsActive']);#}
                    $('#imagePreviewAddUser').css('background-image', "url(" + response.data['Photo'] + ")");
                    return response;
                }
            });


            function readURLAddUser(input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $('#imagePreviewAddUser').css('background-image', 'url(' + e.target.result + ')');
                        $('#imagePreviewAddUser').hide();
                        $('#imagePreviewAddUser').fadeIn(650);
                    }
                    reader.readAsDataURL(input.files[0]);
                }
            }

            $("#Timage").change(function () {
                readURLAddUser(this);
                editStudentPhoto(this);

            });


        }
        function getOnlyClassListList() {

            $.ajax({
                type: 'get',
                url: '/api/GetOnlyClassList/',
                success: function (response) {
                    $('#stuClass').html('');
                    for (i in response.data) {
                        listData = '<option value="' + response.data[i].ClassID + '">' + response.data[i].Standard + '</option>';
                        $('#stuClass').append(listData);
                    }
                    {#            return response;#}
                },
                error: function () {
                    $('#name_status').addClass('validate_data');
                    $('#name_status').html('error.');
                }
            });

        }
        function getClassSectionList(id) {

            {#            var classID = $('#stuClass').val();#}
            $('#stuSection').html('');

            $.ajax({
                type: 'get',
                url: '/api/GetOnlyClassSectionDetail/' + id + '/',
                success: function (response) {


                    for (i in response.data) {
                        listData = '<option value="' + response.data[i].SectionID + '">' + response.data[i].Section + '</option>';
                        $('#stuSection').append(listData);


                    }
                    {#            return response;#}
                },
                error: function () {
                    $('#name_status').addClass('validate_data');
                    $('#name_status').html('error.').fadeIn().fadeOut(2000);
                }
            });


        }

        function deleteStudentDetail(id) {
            $('#deleteID').val(id)

        }

        function postEditStudentDetail() {
            var TStudentID = $('#EditStudentID').val();
            var TfirstName = $('#stuFirstName').val();
            var TmiddleName = $('#stuMiddleName').val();
            var TlastName = $('#stuLastName').val();
            var Temail = $('#stuEmail').val();
            var Tphone = $('#stuPhone').val();
            var TbloodGroup = $('#stuBloodGroup').val();
            var Tdob = $('#stuDOB').val();
            var Taadhar = $('#stuAdhaar').val();
            var Tgender = $("input[name='gender']:checked").val();
            debugger;

            var stuFatherFirstName = $('#stuFatherFirstName').val();
            var stuFatherMiddleName = $('#stuFatherMiddleName').val();
            var stuFatherLastName = $('#stuFatherLastName').val();
            var stuMotherFirstName = $('#stuMotherFirstName').val();
            var stuMotherMiddleName = $('#stuMotherMiddleName').val();
            var stuMotherLastName = $('#stuMotherLastName').val();
            var stuFatherEmail = $('#stuFatherEmail').val();
            var stuFatherPhone = $('#stuFatherPhone').val();
            var stuFatherProfession = $('#stuFatherProfession').val();


            var Taddress = $('#stuAddress').val();
            var Tcity = $('#stuCity').val();
            var Tstate = $('#stuState').val();
            var Tcountry = $('#stuCountry').val();
            var Tpin = $('#stuPincode').val();
            var TPaddress = $('#stuPAddress').val();
            var TPcity = $('#stuPCity').val();
            var TPstate = $('#stuPState').val();
            var TPcountry = $('#stuPCountry').val();
            var TPpin = $('#stuPPincode').val();
            var stuClass = $('#stuClass').val();
            var stuSection = $('#stuSection').val();
            var stuRoll = $('#stuRoll').val();
            var stuDOJ = $('#stuDOJ').val();
            var csrfmiddlewaretoken = $("input[name='csrfmiddlewaretoken']").val();

            data = new FormData();
            data.append('TStudentID', TStudentID);
            data.append('TfirstName', TfirstName);
            data.append('TmiddleName', TmiddleName);
            data.append('TlastName', TlastName);
            data.append('Temail', Temail);
            data.append('Tphone', Tphone);
            data.append('TbloodGroup', TbloodGroup);
            data.append('Tdob', Tdob);
            data.append('Taadhar', Taadhar);
            data.append('Tgender', Tgender);


            data.append('stuFatherFirstName', stuFatherFirstName);
            data.append('stuFatherMiddleName', stuFatherMiddleName);
            data.append('stuFatherLastName', stuFatherLastName);
            data.append('stuMotherFirstName', stuMotherFirstName);
            data.append('stuMotherMiddleName', stuMotherMiddleName);
            data.append('stuMotherLastName', stuMotherLastName);
            data.append('stuFatherEmail', stuFatherEmail);
            data.append('stuFatherPhone', stuFatherPhone);
            data.append('stuFatherProfession', stuFatherProfession);


            data.append('Taddress', Taddress);
            data.append('Tcity', Tcity);
            data.append('Tstate', Tstate);
            data.append('Tcountry', Tcountry);
            data.append('Tpin', Tpin);
            data.append('TPaddress', TPaddress);
            data.append('TPcity', TPcity);
            data.append('TPstate', TPstate);
            data.append('TPcountry', TPcountry);
            data.append('TPpin', TPpin);


            data.append('stuClass', stuClass);
            data.append('stuSection', stuSection);
            data.append('stuRoll', stuRoll);
            data.append('stuDOJ', stuDOJ);


            data.append('csrfmiddlewaretoken', csrfmiddlewaretoken);


            if (TStudentID === "" || TfirstName === "" || TlastName === "" || stuFatherPhone === ""
                || Tdob === '' || Tgender === "" ||
                Taddress === "" || Tcity === "" || Tstate === "" || Tcountry === ""
                || Tpin === "" || TPaddress === "" || TPcity === "" || TPstate === "" || TPcountry === ""
                || TPpin === "" || stuDOJ === "" || stuClass === ""
                || stuFatherFirstName === "" || stuFatherLastName === "" || stuMotherFirstName === ""
                || stuMotherLastName === "" || stuFatherPhone === "" || stuFatherProfession === "") {

                $('#name_status').addClass('validate_data');
                $('#name_status').html('* fields are required.');
                $('#name_status').fadeIn().fadeOut(2000);


            }
            else {
                $.ajax({
                    type: 'post',
                    url: '/api/EditStudentDetail/',
                    data: data,
                    contentType: false,
                    cache: false,
                    processData: false,


                    success: function (response) {
                        if (response.response === 'ok') {
                            $('#name_status').addClass('validate_data');
                            $('#name_status').html('Student Detail added successfully.').fadeIn().fadeOut(2000);
                            $('#myModalStudentEdit').modal('toggle');
                            StudentListTableData.ajax.reload();
                        }
                        else {
                            $('#name_status').removeClass('validate_data');
                            $('#name_status').html("").fadeIn().fadeOut(2000);

                        }

                        return response;
                    },
                    error: function () {
                        $('#name_status').addClass('validate_data');
                        $('#name_status').html('error.').fadeIn().fadeOut(2000);
                    }
                });
            }

        }


        function editStudentPhoto() {
            var imageData = document.getElementById("Timage").files[0];
            var form_data = new FormData();
            form_data.append('file', imageData);
            var EditStudentID = $('#EditStudentID').val();
            form_data.append('StudentID', EditStudentID);

            $.ajax({
                type: 'post',
                url: '/api/UpdateStudentPhoto/',
                data: form_data,
                contentType: false,
                cache: false,
                processData: false,


                success: function (response) {
                    if (response.response === 'ok') {
                        $('#name_status').addClass('validate_data');
                        $('#name_status').html('Student Photo Changed successfully.');
                        $('#name_status').fadeIn().fadeOut(2000);
                        StudentListTableData.ajax.reload();

                    }
                    else {
                        $('#name_status').removeClass('validate_data');
                        $('#name_status').html("error");
                        $('#name_status').fadeIn().fadeOut(2000);

                    }

                    return response;
                },
                error: function () {
                    $('#name_status').addClass('validate_data');
                    $('#name_status').html('error.');
                    $('#name_status').fadeIn().fadeOut(2000);

                }
            });


        }
        function stuChange() {
            $('#studentList tbody').empty();

        }
        var StudentListTableData;
        var counts = 0;
        function GetStudentList() {

            var standard = $('#stuClassget').val();
            var section = $('#stuSec').val();
            if (standard === '') {
                $('#name_status').addClass('validate_data');
                $('#name_status').html('* fields are required.');
                $('#name_status').fadeIn().fadeOut(2000);

            }
            else {
                if (counts === 0) {
                    StudentListTableData = $('#studentList').DataTable({
                        "scrollX": true,
                        dom: 'Blfrtip',
                        buttons: [{
                            extend: 'excel',
                            exportOptions: {
                                columns: [2, 3, 4, 5, 6, 7, 8, 9]
                            }
                        }, {
                            extend: 'print',
                            exportOptions: {
                                columns: [2, 3, 4, 5, 6, 7, 8, 9]
                            }
                        }
                        ],
                        "columnDefs": [
                            {"name": "StudentID", "targets": 0, "orderable": false},
                            {"name": "Photo", "targets": 1, "orderable": false},
                            {"name": "firstName", "targets": 2, "orderable": true},
                            {"name": "Standard", "targets": 3, "orderable": true},
                            {"name": "Section", "targets": 4, "orderable": true},
                            {"name": "Roll", "targets": 5, "orderable": true},
                            {"name": "'Gender'", "targets": 6, "orderable": true},
                            {"name": "FatherName", "targets": 7, "orderable": true},
                            {"name": "Phone", "targets": 8, "orderable": true},
                            {"name": "UniqueKey", "targets": 9, "orderable": true},
                            {"name": "Action", "targets": 10, "orderable": false},

                        ],
                        aaSorting: [[2, 'asc']],
                        "lengthMenu": [[20, 25, 50, 100, -1], [20, 25, 50, 100, "All"]],
                        "pageLength": 20,
                        "processing": true,
                        "serverSide": true,
                        "ajax": "{% url 'SchoolTableApi:getStudentListJson' %}?classID=" + standard + "&sectionID=" + section,
                        stateSave: true
                    });

                    StudentListTableData.column(0).visible(false);
                    counts = counts + 1;


                }
                else {
                    StudentListTableData.ajax.url("{% url 'SchoolTableApi:getStudentListJson' %}?classID=" + standard + "&sectionID=" + section).load();

                }

            }

        }

        function DeleteStudent() {


            var eventID = $('#deleteID').val();
            var standard = $('#stuClassget').val();
            var section = $('#stuSec').val();

            data = new FormData();
            data.append('deleteID', eventID);


            $.ajax({
                type: 'post',
                url: '/api/Delete/Student/',
                data: data,
                contentType: false,
                cache: false,
                processData: false,
                success: function (response) {
                    if (response.response === 'ok') {
                        $('#name_status').addClass('validate_data');
                        $('#name_status').html('Student Deleted.').fadeIn().fadeOut(2000);
                        StudentListTableData.ajax.url("/api/GetStudentList/?classID=" + standard + "&sectionID=" + section).load();
                        $('#myModalDelete').modal('toggle');

                    }
                    else {
                        $('#name_status').addClass('validate_data');
                        $('#name_status').html("" + response.response).fadeIn().fadeOut(2000);
                    }
                    return response;
                },
                error: function () {
                    $('#name_status').addClass('validate_data');
                    $('#name_status').html('error.').fadeIn().fadeOut(2000);
                }
            });

        }


    </script>
{% endblock %}
